<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Happy Birthday, Jun!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: linear-gradient(135deg, #0a192f, #0e2648);
            min-height: 100vh;
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            touch-action: manipulation;
        }
        
        canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        .main-container {
            position: relative;
            display: inline-block;
            text-align: center;
            z-index: 10;
            margin-bottom: 120px;
            transition: transform 0.3s ease;
        }
        
        .date-text {
            color: rgba(255, 255, 255, 0.85);
            font-size: clamp(1.2rem, 4vw, 1.8rem);
            text-align: center;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            letter-spacing: 3px;
            animation: fadeInOut 3s infinite alternate;
        }
        
        @keyframes fadeInOut {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }
        
        .main-text {
            position: relative;
            z-index: 3;
            color: #003c7e;
            font-size: clamp(3rem, 10vw, 5.5rem);
            font-weight: 900;
            letter-spacing: clamp(3px, 1vw, 6px);
            text-shadow: 
                0 0 15px #ffffff, 
                0 0 25px #0066cc, 
                0 0 40px #004d99;
            animation: textAnimation 2s ease-in-out infinite alternate;
            will-change: transform;
        }
        
        .image-container {
            position: absolute;
            bottom: -5px;
            right: -15px;
            z-index: 4;
            width: clamp(80px, 20vw, 120px);
            height: clamp(80px, 20vw, 120px);
            border-radius: 50%;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.7);
            animation: floatImage 5s ease-in-out infinite;
            border: 3px solid rgba(255, 255, 255, 0.7);
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(0);
            will-change: transform;
        }
        
        @keyframes floatImage {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-10px) rotate(3deg); }
            50% { transform: translateY(-20px) rotate(-3deg); }
            75% { transform: translateY(-10px) rotate(2deg); }
        }
        
        @keyframes textAnimation {
            0% {
                transform: scale(1) translateY(0);
                text-shadow: 
                    0 0 15px #ffffff, 
                    0 0 25px #0066cc, 
                    0 0 40px #004d99;
            }
            50% {
                transform: scale(1.08) translateY(-5px);
                text-shadow: 
                    0 0 20px #ffffff, 
                    0 0 35px #0088ff, 
                    0 0 50px #0066cc;
            }
            100% {
                transform: scale(1.05) translateY(-3px);
                text-shadow: 
                    0 0 18px #ffffff, 
                    0 0 30px #0077e6, 
                    0 0 45px #0055aa;
            }
        }
        
        /* ÂºπÂπïÊ†∑Âºè */
        .barrage {
            position: absolute;
            white-space: nowrap;
            z-index: 2;
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 25px;
            backdrop-filter: blur(5px);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
            color: white;
            font-size: clamp(1rem, 3vw, 1.2rem);
            animation: barrageAnimation linear forwards;
            will-change: transform;
        }
        
        @keyframes barrageAnimation {
            from { transform: translateX(100vw); }
            to { transform: translateX(-100%); }
        }
        
        /* ËæìÂÖ•Âå∫ÂüüÊ†∑Âºè */
        .input-container {
            position: fixed;
            bottom: 20px;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            z-index: 20;
            padding: 0 20px;
        }
        
        .input-box {
            display: flex;
            max-width: 600px;
            width: 100%;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 50px;
            padding: 10px;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
        }
        
        #messageInput {
            flex: 1;
            padding: 12px 20px;
            border: none;
            background: transparent;
            color: white;
            font-size: clamp(0.9rem, 3vw, 1.1rem);
            outline: none;
        }
        
        #messageInput::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        
        #submitBtn {
            background: linear-gradient(45deg, #ff8c66, #ff6666);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 12px 30px;
            font-size: clamp(0.9rem, 3vw, 1.1rem);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        #submitBtn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(255, 140, 102, 0.7);
        }
        
        /* ÁßªÂä®Á´Ø‰ºòÂåñ */
        @media (max-width: 768px) {
            .main-container {
                margin-bottom: 80px;
            }
            
            .image-container {
                right: -5px;
            }
            
            .input-box {
                max-width: 90%;
            }
            
            #submitBtn {
                padding: 10px 20px;
            }
        }
        
        /* ÊÄßËÉΩ‰ºòÂåñÁ±ª */
        .performance-optimized {
            will-change: transform, opacity;
            backface-visibility: hidden;
            transform: translateZ(0);
        }
    </style>
</head>
<body>
    <canvas id="birthdayCanvas"></canvas>
    
    <div class="main-container">
        <div class="date-text">2025.08.16</div>
        <div class="main-text">HBD to Jun</div>
        <div class="image-container">
            <img src="https://p.sda1.dev/26/7799a351acfa5db022f879b76a84151b/YOUR_IMAGE.png"  alt="Birthday Photo" style="width:100%; height:100%; object-fit:cover;">

        </div>
    </div>
    
    <!-- ÂºπÂπïÂÆπÂô® -->
    <div id="barrageContainer"></div>
    
    <!-- ËæìÂÖ•Âå∫Âüü -->
    <div class="input-container">
        <div class="input-box">
            <input type="text" id="messageInput" placeholder="Send your wishes...">
            <button id="submitBtn">Submit</button>
        </div>
    </div>
    
    <audio id="birthdayAudio" autoplay>
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-happy-birthday-to-you-443.mp3" type="audio/mpeg">
    </audio>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('birthdayCanvas');
            const ctx = canvas.getContext('2d');
            const emojis = ['üéÇ', 'üéÅ', 'üéâ', '‚ú®'];
            const particles = [];
            const barrageContainer = document.getElementById('barrageContainer');
            const messageInput = document.getElementById('messageInput');
            const submitBtn = document.getElementById('submitBtn');
            const mainContainer = document.querySelector('.main-container');
            
            // ËÆæÁΩÆcanvasÂ∞∫ÂØ∏‰∏∫Á™óÂè£Â§ßÂ∞è
            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            
            // ‰ΩøÁî®Èò≤Êäñ‰ºòÂåñresizeÊÄßËÉΩ
            let resizeTimeout;
            function debouncedResize() {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(() => {
                    resizeCanvas();
                    // ÁßªÂä®Á´ØË∞ÉÊï¥Á≤íÂ≠êÊï∞Èáè
                    adjustParticlesForMobile();
                }, 200);
            }
            
            resizeCanvas();
            window.addEventListener('resize', debouncedResize);
            
            // Ê†πÊçÆËÆæÂ§áË∞ÉÊï¥Á≤íÂ≠êÊï∞Èáè
            function adjustParticlesForMobile() {
                const isMobile = window.innerWidth <= 768;
                const targetCount = isMobile ? 50 : 120;
                
                // Ê∑ªÂä†ÊàñÁßªÈô§Á≤íÂ≠ê‰ª•ËææÂà∞ÁõÆÊ†áÊï∞Èáè
                if (particles.length > targetCount) {
                    particles.splice(targetCount, particles.length - targetCount);
                } else if (particles.length < targetCount) {
                    for (let i = particles.length; i < targetCount; i++) {
                        particles.push(new BirthdayParticle());
                    }
                }
            }
            
            // ÁîüÊó•ÂÖÉÁ¥†Á≤íÂ≠êÁ±ª
            class BirthdayParticle {
                constructor(x, y) {
                    this.emoji = emojis[Math.floor(Math.random() * emojis.length)];
                    
                    // Ê†πÊçÆÂ±èÂπïÂ∞∫ÂØ∏Ë∞ÉÊï¥emojiÂ§ßÂ∞è
                    if (window.innerWidth > 768) {
                        // ÁîµËÑëÁ´ØÔºö30-80px
                        this.size = Math.random() * 50 + 30;
                    } else {
                        // ÁßªÂä®Á´ØÔºö20-50px
                        this.size = Math.random() * 30 + 20;
                    }
                    
                    this.x = x || Math.random() * canvas.width;
                    this.y = y || -50;
                    this.speedX = Math.random() * 3 - 1.5;
                    this.speedY = Math.random() * 3 + 2;
                    this.opacity = Math.random() * 0.7 + 0.3;
                    this.rotation = Math.random() * 360;
                    this.rotationSpeed = Math.random() * 4 - 2;
                    this.glowIntensity = Math.random() * 0.5 + 0.5;
                    this.glowDirection = Math.random() > 0.5 ? 1 : -1;
                    this.glowChangeSpeed = Math.random() * 0.02 + 0.01;
                }
                
                update() {
                    this.x += this.speedX;
                    this.y += this.speedY;
                    this.rotation += this.rotationSpeed;
                    
                    // ÊîπÂèòÂèëÂÖâÂº∫Â∫¶
                    this.glowIntensity += this.glowChangeSpeed * this.glowDirection;
                    if (this.glowIntensity > 1 || this.glowIntensity < 0.5) {
                        this.glowDirection *= -1;
                    }
                    
                    // Â¶ÇÊûúÁ≤íÂ≠êÁ¶ªÂºÄÂ±èÂπïÔºåÈáçÊñ∞ËÆæÁΩÆ‰ΩçÁΩÆ
                    if (this.y > canvas.height || 
                        this.x > canvas.width + 100 || 
                        this.x < -100) {
                        this.reset();
                    }
                }
                
                reset() {
                    this.x = Math.random() * canvas.width;
                    this.y = -50;
                    this.speedX = Math.random() * 3 - 1.5;
                    this.speedY = Math.random() * 3 + 2;
                    this.opacity = Math.random() * 0.7 + 0.3;
                    
                    // ÈáçÁΩÆÊó∂‰πüÊ†πÊçÆÂ±èÂπïÂ∞∫ÂØ∏Ë∞ÉÊï¥Â§ßÂ∞è
                    if (window.innerWidth > 768) {
                        this.size = Math.random() * 50 + 30;
                    } else {
                        this.size = Math.random() * 30 + 20;
                    }
                }
                
                draw() {
                    ctx.save();
                    ctx.globalAlpha = this.opacity;
                    ctx.translate(this.x, this.y);
                    ctx.rotate(this.rotation * Math.PI / 180);
                    
                    // Ê∑ªÂä†ÂèëÂÖâÊïàÊûú
                    ctx.shadowColor = this.getGlowColor();
                    ctx.shadowBlur = 25 * this.glowIntensity;
                    
                    ctx.font = `${this.size}px Arial`;
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(this.emoji, 0, 0);
                    
                    ctx.restore();
                }
                
                getGlowColor() {
                    const colors = {
                        'üéÇ': '#ff8c66',
                        'üéÅ': '#66b3ff',
                        'üéâ': '#ffcc66',
                        '‚ú®': '#ffffff'
                    };
                    return colors[this.emoji] || '#ffffff';
                }
            }
            
            // ÂàõÂª∫ÂàùÂßãÁ≤íÂ≠ê
            function createInitialParticles() {
                const isMobile = window.innerWidth <= 768;
                const count = isMobile ? 50 : 120;
                for (let i = 0; i < count; i++) {
                    particles.push(new BirthdayParticle());
                }
            }
            
            // ÁÇπÂáªÊ∑ªÂä†Á≤íÂ≠êÁöÑÂ§ÑÁêÜ
            canvas.addEventListener('click', (e) => {
                for (let i = 0; i < 10; i++) {
                    const xOffset = Math.random() * 50 - 25;
                    const yOffset = Math.random() * 50 - 25;
                    particles.push(new BirthdayParticle(e.clientX + xOffset, e.clientY + yOffset));
                }
            });
            
            // Âä®ÁîªÂæ™ÁéØ
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // ÁªòÂà∂ËÉåÊôØÊïàÊûú
                drawBackground();
                
                // ÁªòÂà∂ÊâÄÊúâÁ≤íÂ≠ê
                particles.forEach((particle, index) => {
                    particle.update();
                    particle.draw();
                });
                
                requestAnimationFrame(animate);
            }
            
            // ÁªòÂà∂ËÉåÊôØÂÖâÊïà
            function drawBackground() {
                ctx.fillStyle = 'rgba(10, 25, 47, 0.15)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Ê∑ªÂä†‰∏Ä‰∫õÂÖâÁÇπÊïàÊûú
                for (let i = 0; i < 20; i++) {
                    const x = Math.random() * canvas.width;
                    const y = Math.random() * canvas.height;
                    const r = Math.random() * 3 + 1;
                    
                    ctx.beginPath();
                    ctx.arc(x, y, r, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
                    ctx.fill();
                }
            }
            
            // Â§ÑÁêÜÈü≥È¢ëËá™Âä®Êí≠Êîæ
            document.addEventListener('click', function audioInit() {
                const audio = document.getElementById('birthdayAudio');
                if (audio.paused) {
                    audio.play().catch(e => console.log('Auto-play was prevented'));
                }
                document.removeEventListener('click', audioInit);
            });
            
            // ÂºπÂπïÂäüËÉΩ
            function createBarrage(message) {
                const barrage = document.createElement('div');
                barrage.className = 'barrage performance-optimized';
                barrage.textContent = message;
                
                // ÈöèÊú∫‰ΩçÁΩÆÂíåÈÄüÂ∫¶ÔºàÂä†Âø´ÊµÅÈÄüÔºâ
                const top = Math.random() * (window.innerHeight - 100) + 50;
                // Âä†Âø´ÂºπÂπïÊµÅÈÄüÔºöÊåÅÁª≠Êó∂Èó¥Áº©Áü≠‰∏∫8-15Áßí
                const duration = Math.random() * 7 + 8; 
                
                barrage.style.top = `${top}px`;
                barrage.style.animationDuration = `${duration}s`;
                
                barrageContainer.appendChild(barrage);
                
                // ÁßªÈô§ÂºπÂπïÂÖÉÁ¥†
                setTimeout(() => {
                    barrage.remove();
                }, duration * 1000);
            }
            
            // Êèê‰∫§Á•ùÁ¶è
            submitBtn.addEventListener('click', () => {
                const message = messageInput.value.trim();
                if (message) {
                    createBarrage(message);
                    messageInput.value = '';
                }
            });
            
            // ÊåâEnterÈîÆÊèê‰∫§
            messageInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    submitBtn.click();
                }
            });
            
            // ÂàõÂª∫‰∏Ä‰∫õÂàùÂßãÁ•ùÁ¶èÂºπÂπï
const initialMessages = [
                "„ÅäË™ïÁîüÊó•„Åä„ÇÅ„Åß„Å®„ÅÜÔºÅ",
                "Á•ùÊàëÊé®ÁîüÊó•Âø´‰πêÔºÅÔºÅ",
                "Ê∞∏ËøúÂñúÊ¨¢‰Ω†üíô",
                "Happy Birthday, Jun!",
                "Á•ù‰Ω†Ëµ∞‰∏äÊõ¥Â§ßÁöÑËàûÂè∞",
                "Á∫ØÂêõÁîüÊó•Âø´‰πêÔºåÂ§©Â§©ÂºÄÂøÉÔºÅ",
                "‰Ω†Ë¢´ÊâÄÊúâ‰∫∫ÁúüÂàáÂú∞Áà±ÁùÄ",
                "ÁîüÊó•Âø´‰πêÁ∫ØÂêõÔºåÁªßÁª≠ÂãáÂæÄÁõ¥ÂâçÂêßÔºÅ",
                "ËØ∑ÁªßÁª≠ÂÅöÈÇ£‰∏™Áã¨‰∏ÄÊó†‰∫å„ÄÅËÆ§ÁúüÂèàÊ∏©ÊüîÁöÑÊ∂üÁ∫ØÂêßÔºÅ‚Äã",
                "ÂÖ®‰∏ñÁïåÊúÄÊ£íÁöÑÁ∫ØÂêõÔºöÁîüÊó•Âø´Ê®ÇÔºÅ",
                "ÊÑüË∞¢‰Ω†ÁöÑËØûÁîü",
                "ÂñúÊ¨¢‰Ω†Á∫ØÂáÄÂèàÂùöÂÆöÁöÑÁúºÁ•û",
                "ÊÑø‰Ω†Ë¢´Êó†Â∞ΩÁöÑÂπ∏Á¶è‰∏éÁà±ÊÑèÂåÖÂõ¥",
                "Ê∞∏ËøúÂ∫îÊè¥‰Ω†ÔºÅüíô"
            ];
            
            // ÂàùÂßãÂåñÂºπÂπï
            function initBarrages() {
                initialMessages.forEach((msg, i) => {
                    setTimeout(() => {
                        createBarrage(msg);
                    }, i * 2000); // Âä†Âø´ÂàùÂßãÂºπÂπïÂá∫Áé∞ÈÄüÂ∫¶
                });
            }
            
            // ÁßªÂä®Á´ØËß¶Êë∏‰ºòÂåñ
            function optimizeForTouch() {
                if ('ontouchstart' in window) {
                    // Ê∑ªÂä†Ëß¶Êë∏ÂèçÈ¶à
                    submitBtn.addEventListener('touchstart', () => {
                        submitBtn.style.transform = 'scale(0.95)';
                    });
                    
                    submitBtn.addEventListener('touchend', () => {
                        submitBtn.style.transform = '';
                    });
                    
                    // Èò≤Ê≠¢ÂèåÂáªÁº©Êîæ
                    let lastTouchTime = 0;
                    document.addEventListener('touchend', (event) => {
                        const now = new Date().getTime();
                        if (now - lastTouchTime < 300) {
                            event.preventDefault();
                        }
                        lastTouchTime = now;
                    }, false);
                }
            }
            
            createInitialParticles();
            animate();
            initBarrages();
            optimizeForTouch();
        });
    </script>
</body>
</html>
